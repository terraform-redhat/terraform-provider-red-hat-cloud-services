---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "rhcs_cluster_rosa_classic Resource - terraform-provider-rhcs"
subcategory: ""
description: |-
  OpenShift managed cluster using rosa sts.
---

# rhcs_cluster_rosa_classic (Resource***REMOVED***

OpenShift managed cluster using rosa sts.

## Example Usage

```terraform
locals {
  sts_roles = {
    role_arn         = "arn:aws:iam::account-id-123:role/account-prefix-Installer-Role",
    support_role_arn = "arn:aws:iam::account-id-123:role/account-prefix-Support-Role",
    instance_iam_roles = {
      master_role_arn = "arn:aws:iam::account-id-123:role/account-prefix-ControlPlane-Role",
      worker_role_arn = "arn:aws:iam::account-id-123:role/account-prefix-Worker-Role"
    },
    operator_role_prefix = "operator-prefix",
    oidc_config_id       = "oidc-config-id-123"
  }
}


resource "rhcs_cluster_rosa_classic" "rosa_sts_cluster" {
  name                = "my-cluster"
  cloud_region        = "us-east-2"
  aws_account_id      = "account-id-123"
  availability_zones  = ["us-east-2a"]
  replicas            = 3
  version             = "4.13.12"
  properties = {
    rosa_creator_arn = "aws_caller_identity-current-arn"
  }
  sts = local.sts_roles
  wait_for_create_complete = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `aws_account_id` (String***REMOVED*** Identifier of the AWS account.
- `cloud_region` (String***REMOVED*** Cloud region identifier, for example 'us-east-1'.
- `name` (String***REMOVED*** Name of the cluster. Cannot exceed 15 characters in length.

### Optional

- `admin_credentials` (Attributes***REMOVED*** Admin user credentials (see [below for nested schema](#nestedatt--admin_credentials***REMOVED******REMOVED***
- `autoscaling_enabled` (Boolean***REMOVED*** Enables autoscaling.
- `availability_zones` (List of String***REMOVED*** Availability zones.
- `aws_private_link` (Boolean***REMOVED*** Provides private connectivity from your cluster's VPC to Red Hat SRE, without exposing traffic to the public internet.
- `aws_subnet_ids` (List of String***REMOVED*** AWS subnet IDs.
- `base_dns_domain` (String***REMOVED*** Base DNS domain name previously reserved and matching the hosted zone name of the private Route 53 hosted zone associated with intended shared VPC, e.g., '1vo8.p1.openshiftapps.com'.
- `channel_group` (String***REMOVED*** Name of the channel group where you select the OpenShift cluster version, for example 'stable'. For ROSA, only 'stable' is supported.
- `compute_machine_type` (String***REMOVED*** Identifies the machine type used by the default/initial worker nodes, for example `m5.xlarge`. Use the `rhcs_machine_types` data source to find the possible values.
- `worker_disk_size` (Number***REMOVED*** Compute node root disk size, in GiB. (only valid during cluster creation***REMOVED***
- `default_mp_labels` (Map of String***REMOVED*** This value is the default/initial machine pool labels. Format should be a comma-separated list of '{"key1"="value1", "key2"="value2"}'. This list overwrites any modifications made to node labels on an ongoing basis.
- `destroy_timeout` (Number***REMOVED*** This value sets the maximum duration in minutes to allow for destroying resources. Default value is 60 minutes.
- `disable_scp_checks` (Boolean***REMOVED*** Enables you to monitor your own projects in isolation from Red Hat Site Reliability Engineer (SRE***REMOVED*** platform metrics.
- `disable_waiting_in_destroy` (Boolean***REMOVED*** Disable addressing cluster state in the destroy resource. Default value is false, and so a `destroy` will wait for the cluster to be deleted.
- `disable_workload_monitoring` (Boolean***REMOVED*** Enables you to monitor your own projects in isolation from Red Hat Site Reliability Engineer (SRE***REMOVED*** platform metrics.
- `ec2_metadata_http_tokens` (String***REMOVED*** This value determines which EC2 Instance Metadata Service mode to use for EC2 instances in the cluster.This can be set as `optional` (IMDS v1 or v2***REMOVED*** or `required` (IMDSv2 only***REMOVED***. This feature is available from OpenShift version 4.11.0 and newer.
- `etcd_encryption` (Boolean***REMOVED*** Encrypt etcd data. Note that all AWS storage is already encrypted.
- `external_id` (String***REMOVED*** Unique external identifier of the cluster.
- `fips` (Boolean***REMOVED*** Create cluster that uses FIPS Validated / Modules in Process cryptographic libraries.
- `host_prefix` (Number***REMOVED*** Length of the prefix of the subnet assigned to each node.
- `kms_key_arn` (String***REMOVED*** The key ARN is the Amazon Resource Name (ARN***REMOVED*** of a AWS Key Management Service (KMS***REMOVED*** Key. It is a unique, fully qualified identifier for the AWS KMS Key. A key ARN includes the AWS account, Region, and the key ID(optional***REMOVED***.
- `machine_cidr` (String***REMOVED*** Block of IP addresses for nodes.
- `max_replicas` (Number***REMOVED*** Maximum replicas of worker nodes in a machine pool.
- `min_replicas` (Number***REMOVED*** Minimum replicas of worker nodes in a machine pool.
- `multi_az` (Boolean***REMOVED*** Indicates if the cluster should be deployed to multiple availability zones. Default value is 'false'.
- `pod_cidr` (String***REMOVED*** Block of IP addresses for pods.
- `private` (Boolean***REMOVED*** Restrict cluster API endpoint and application routes to, private connectivity. This requires that PrivateLink be enabled and by extension, your own VPC.
- `private_hosted_zone` (Attributes***REMOVED*** Used in a shared VPC topology. HostedZone attributes (see [below for nested schema](#nestedatt--private_hosted_zone***REMOVED******REMOVED***
- `properties` (Map of String***REMOVED*** User defined properties.
- `proxy` (Attributes***REMOVED*** proxy (see [below for nested schema](#nestedatt--proxy***REMOVED******REMOVED***
- `replicas` (Number***REMOVED*** Number of worker/compute nodes to provision. Single zone clusters need at least 2 nodes, multizone clusters need at least 3 nodes.
- `service_cidr` (String***REMOVED*** Block of IP addresses for the cluster service network.
- `sts` (Attributes***REMOVED*** STS configuration. (see [below for nested schema](#nestedatt--sts***REMOVED******REMOVED***
- `tags` (Map of String***REMOVED*** Apply user defined tags to all cluster resources created in AWS.
- `upgrade_acknowledgements_for` (String***REMOVED*** Indicates acknowledgement of agreements required to upgrade the cluster version between minor versions (e.g. a value of "4.12" indicates acknowledgement of any agreements required to upgrade to OpenShift 4.12.z from 4.11 or before***REMOVED***.
- `version` (String***REMOVED*** Desired version of OpenShift for the cluster, for example '4.11.0'. If version is greater than the currently running version, an upgrade will be scheduled.
- `wait_for_create_complete` (Boolean***REMOVED*** Wait until the cluster is either in a ready state or in an error state. The waiter has a timeout of 60 minutes, with the default value set to false

### Read-Only

- `api_url` (String***REMOVED*** URL of the API server.
- `ccs_enabled` (Boolean***REMOVED*** Enables customer cloud subscription (Immutable with ROSA***REMOVED***
- `console_url` (String***REMOVED*** URL of the console.
- `current_version` (String***REMOVED*** The currently running version of OpenShift on the cluster, for example '4.11.0'.
- `domain` (String***REMOVED*** DNS domain of cluster.
- `id` (String***REMOVED*** Unique identifier of the cluster.
- `ocm_properties` (Map of String***REMOVED*** Merged properties defined by OCM and the user defined 'properties'.
- `state` (String***REMOVED*** State of the cluster.

<a id="nestedatt--admin_credentials"></a>
### Nested Schema for `admin_credentials`

Required:

- `password` (String, Sensitive***REMOVED*** Admin password that will be created with the cluster.
- `username` (String***REMOVED*** Admin username that will be created with the cluster.


<a id="nestedatt--private_hosted_zone"></a>
### Nested Schema for `private_hosted_zone`

Required:

- `id` (String***REMOVED*** ID assigned by AWS to private Route 53 hosted zone associated with intended shared VPC, e.g. 'Z05646003S02O1ENCDCSN'.
- `role_arn` (String***REMOVED*** AWS IAM role ARN with a policy attached, granting permissions necessary to create and manage Route 53 DNS records in private Route 53 hosted zone associated with intended shared VPC.


<a id="nestedatt--proxy"></a>
### Nested Schema for `proxy`

Optional:

- `additional_trust_bundle` (String***REMOVED*** A string containing a PEM-encoded X.509 certificate bundle that will be added to the nodes' trusted certificate store.
- `http_proxy` (String***REMOVED*** HTTP proxy.
- `https_proxy` (String***REMOVED*** HTTPS proxy.
- `no_proxy` (String***REMOVED*** No proxy.


<a id="nestedatt--sts"></a>
### Nested Schema for `sts`

Required:

- `instance_iam_roles` (Attributes***REMOVED*** Instance IAM Roles (see [below for nested schema](#nestedatt--sts--instance_iam_roles***REMOVED******REMOVED***
- `operator_role_prefix` (String***REMOVED*** Operator IAM Role prefix
- `role_arn` (String***REMOVED*** Installer Role
- `support_role_arn` (String***REMOVED*** Support Role

Optional:

- `oidc_config_id` (String***REMOVED*** OIDC Configuration ID
- `oidc_endpoint_url` (String***REMOVED*** OIDC Endpoint URL

Read-Only:

- `thumbprint` (String***REMOVED*** SHA1-hash value of the root CA of the issuer URL

<a id="nestedatt--sts--instance_iam_roles"></a>
### Nested Schema for `sts.instance_iam_roles`

Required:

- `master_role_arn` (String***REMOVED*** Master/Control Plane Node Role ARN
- `worker_role_arn` (String***REMOVED*** Worker/Compute Node Role ARN
